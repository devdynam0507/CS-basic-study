## 인덱스를 만드는 방법

### MySQL 인덱스

클러스터/세컨더리 인덱스가 있음

- 클러스터 인덱스: PK로 설정하거나, unique not null 옵션을 추가
- 세컨더리 인덱스: create index 명령어를 통해 생성

### 클러스터 인덱스 (Clustered Index)

- 클러스터 인덱스는 테이블의 프라이머리 키(Primary Key)에 대해 자동으로 생성되는 인덱스
- 클러스터 인덱스에서는 인덱스 키 값의 순서에 따라 실제 데이터 행이 물리적으로 정렬되어 저장
- 클러스터 인덱스의 리프 노드에는 실제 데이터 페이지가 포함
- 클러스터 인덱스는 테이블당 하나만 존재
- 프라이머리 키를 기준으로 데이터가 정렬되어 저장되므로 프라이머리 키를 이용한 검색이 매우 빠름
- 클러스터 인덱스는 범위 검색에도 효율적
- 프라이머리 키 값의 변경이 발생하면 데이터 페이지의 물리적인 위치가 변경되어야 하므로 비용이 발생

### 세컨더리 인덱스 (Secondary Index)

- 세컨더리 인덱스는 프라이머리 키 이외의 다른 컬럼에 대해 생성되는 인덱스
- 세컨더리 인덱스의 리프 노드에는 인덱스 키 값과 해당 키 값을 가진 행의 프라이머리 키 값이 저장  
  즉, 세컨더리 인덱스는 인덱스 키 값과 프라이머리 키 값의 매핑 정보를 가지고 있음
- 세컨더리 인덱스를 통해 검색할 때는 먼저 인덱스에서 프라이머리 키 값을 찾은 후, 클러스터 인덱스를 이용하여 실제 데이터에 접근
- 세컨더리 인덱스는 테이블에 여러 개 생성될 수 있음
- 세컨더리 인덱스를 통한 검색은 클러스터 인덱스에 비해 상대적으로 느림.  
  그 이유는 인덱스에서 프라이머리 키 값을 찾은 후, 다시 클러스터 인덱스를 통해 데이터에 접근해야 하기 때문
- 세컨더리 인덱스는 인덱스 키 값의 변경이 발생해도 실제 데이터 페이지의 위치는 변경되지 않음

### MongoDB 인덱스

도큐먼트를 만들면 자동으로 ObjectID가 형성되며, 해당 키가 기본키로 설정됨

- 세컨더리키도 부가적으로 설정해서 기본키와 세컨더리키를 같이 쓰는 복합 인덱스를 설정할 수 있음
